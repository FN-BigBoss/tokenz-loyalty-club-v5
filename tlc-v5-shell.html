
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>TokenZ Loyalty Club v5.0 - Modular Container</title>
    <script src="https://cdn.tailwindcss.com"></script>
    
    <!-- TLC Configuration - Your Config File URL -->
    <script src="https://drive.google.com/uc?export=download&id=1BH_AQXjvBTh3DCSn3_8rsQ0hMhw-UW-e"></script>
    
    <style>
        @import url('https://fonts.googleapis.com/css2?family=Inter:wght@300;400;500;600;700&display=swap');
        * { font-family: 'Inter', sans-serif; }
        .loading { animation: spin 1s linear infinite; }
        @keyframes spin { from { transform: rotate(0deg); } to { transform: rotate(360deg); } }
        .success-pulse { animation: pulse 2s infinite; }
        @keyframes pulse { 0%, 100% { opacity: 1; } 50% { opacity: 0.5; } }
        .config-panel { max-height: 80vh; overflow-y: auto; }
    </style>
</head>
<body class="bg-gray-50">
    <!-- Module Configuration Panel -->
    <div id="configPanel" class="fixed inset-0 bg-black bg-opacity-50 flex items-center justify-center z-50">
        <div class="bg-white rounded-lg shadow-xl max-w-4xl w-full mx-4 config-panel">
            <div class="p-6 border-b border-gray-200">
                <div class="flex items-center justify-between">
                    <div>
                        <h1 class="text-2xl font-bold text-gray-900">üéØ TokenZ Loyalty Club v5.0</h1>
                        <p class="text-gray-600 mt-1">Modular Application Container</p>
                    </div>
                    <div class="text-right">
                        <div class="text-sm text-gray-500">Status</div>
                        <div id="systemStatus" class="font-semibold text-yellow-600">‚è≥ Initializing...</div>
                    </div>
                </div>
            </div>
            
            <div class="p-6">
                <!-- Configuration Status -->
                <div class="mb-6">
                    <h2 class="text-lg font-semibold mb-3">üìã Configuration Status</h2>
                    <div id="configStatus" class="bg-yellow-50 border border-yellow-200 rounded-lg p-4">
                        <div class="flex items-center">
                            <div class="loading w-5 h-5 border-2 border-yellow-400 border-t-transparent rounded-full mr-3"></div>
                            <span class="text-yellow-800">Loading configuration...</span>
                        </div>
                    </div>
                </div>

                <!-- Module Loading Progress -->
                <div class="mb-6">
                    <h2 class="text-lg font-semibold mb-3">üì¶ Module Loading Progress</h2>
                    <div class="space-y-3">
                        <div class="flex justify-between items-center">
                            <span class="text-sm font-medium">Overall Progress</span>
                            <span id="overallProgress" class="text-sm text-gray-600">0%</span>
                        </div>
                        <div class="w-full bg-gray-200 rounded-full h-2">
                            <div id="progressBar" class="bg-blue-600 h-2 rounded-full transition-all duration-300" style="width: 0%"></div>
                        </div>
                        <div id="loadingStatus" class="text-sm text-gray-600">Waiting to start...</div>
                    </div>
                </div>

                <!-- Module Status Grid -->
                <div class="mb-6">
                    <h2 class="text-lg font-semibold mb-3">üîß Module Status</h2>
                    <div class="grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4" id="moduleStatusGrid">
                        <!-- Module status cards will be populated here -->
                    </div>
                </div>

                <!-- System Information -->
                <div class="mb-6">
                    <h2 class="text-lg font-semibold mb-3">‚ÑπÔ∏è System Information</h2>
                    <div class="bg-gray-50 rounded-lg p-4">
                        <div class="grid grid-cols-1 md:grid-cols-2 gap-4 text-sm">
                            <div>
                                <span class="font-medium">Version:</span>
                                <span class="ml-2 text-gray-600">5.0</span>
                            </div>
                            <div>
                                <span class="font-medium">Load Time:</span>
                                <span id="loadTime" class="ml-2 text-gray-600">Calculating...</span>
                            </div>
                            <div>
                                <span class="font-medium">Browser:</span>
                                <span id="browserInfo" class="ml-2 text-gray-600">Detecting...</span>
                            </div>
                            <div>
                                <span class="font-medium">Timestamp:</span>
                                <span id="timestamp" class="ml-2 text-gray-600">--</span>
                            </div>
                        </div>
                    </div>
                </div>

                <!-- Action Buttons -->
                <div class="flex flex-wrap gap-3">
                    <button id="launchBtn" class="bg-blue-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-blue-700 transition-colors disabled:opacity-50 disabled:cursor-not-allowed" disabled>
                        üöÄ Launch Application
                    </button>
                    <button id="reloadBtn" class="bg-gray-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-gray-700 transition-colors">
                        üîÑ Reload Modules
                    </button>
                    <button id="debugBtn" class="bg-yellow-600 text-white px-6 py-2 rounded-lg font-medium hover:bg-yellow-700 transition-colors">
                        üêõ Debug Info
                    </button>
                </div>
            </div>
        </div>
    </div>

    <!-- Main Application Container (Hidden Initially) -->
    <div id="mainApp" class="hidden">
        <!-- The main TLC application will be loaded here -->
    </div>

    <!-- Error Display -->
    <div id="errorDisplay" class="hidden fixed inset-0 bg-red-50 flex items-center justify-center z-50">
        <div class="bg-white border border-red-200 rounded-lg shadow-xl max-w-2xl w-full mx-4 p-6">
            <div class="flex items-center mb-4">
                <div class="text-red-500 text-2xl mr-3">‚ö†Ô∏è</div>
                <h2 class="text-xl font-bold text-red-800">Application Error</h2>
            </div>
            <div id="errorMessage" class="text-red-700 mb-4"></div>
            <div class="flex gap-3">
                <button onclick="location.reload()" class="bg-red-600 text-white px-4 py-2 rounded font-medium hover:bg-red-700">
                    üîÑ Reload Page
                </button>
                <button id="hideErrorBtn" class="bg-gray-600 text-white px-4 py-2 rounded font-medium hover:bg-gray-700">
                    ‚ùå Close
                </button>
            </div>
        </div>
    </div>

    <script>
        console.log('üéØ TokenZ Loyalty Club v5.0 - Modular Container Starting...');
        
        // Application state
        const APP_STATE = {
            startTime: Date.now(),
            configLoaded: false,
            modulesLoaded: false,
            errors: [],
            loadingProgress: 0
        };

        // Check if configuration is loaded
        function checkConfiguration() {
            const configStatus = document.getElementById('configStatus');
            
            if (typeof window.TLC_CONFIG === 'undefined') {
                configStatus.innerHTML = `
                    <div class="flex items-center">
                        <div class="text-red-500 text-xl mr-3">‚ùå</div>
                        <div>
                            <div class="font-medium text-red-800">Configuration Not Loaded</div>
                            <div class="text-red-600 text-sm mt-1">
                                Please update the config file URL in the HTML head section
                            </div>
                        </div>
                    </div>
                `;
                return false;
            }

            // Validate configuration
            if (!window.TLC_CONFIG.validate()) {
                configStatus.innerHTML = `
                    <div class="flex items-center">
                        <div class="text-yellow-500 text-xl mr-3">‚ö†Ô∏è</div>
                        <div>
                            <div class="font-medium text-yellow-800">Configuration Incomplete</div>
                            <div class="text-yellow-600 text-sm mt-1">
                                Please update the module URLs in tlc-config-v5.0.js
                            </div>
                        </div>
                    </div>
                `;
                return false;
            }

            configStatus.innerHTML = `
                <div class="flex items-center">
                    <div class="text-green-500 text-xl mr-3 success-pulse">‚úÖ</div>
                    <div>
                        <div class="font-medium text-green-800">Configuration Loaded Successfully</div>
                        <div class="text-green-600 text-sm mt-1">
                            All module URLs configured and validated
                        </div>
                    </div>
                </div>
            `;
            
            APP_STATE.configLoaded = true;
            return true;
        }

        // MODULE URLS - Now loaded from configuration file
        function getModuleUrls() {
            if (!window.TLC_CONFIG) {
                return {
                    manager: 'Configuration file not loaded',
                    data: 'Configuration file not loaded',
                    utils: 'Configuration file not loaded', 
                    core: 'Configuration file not loaded',
                    ui: 'Configuration file not loaded',
                    styles: 'Configuration file not loaded'
                };
            }
            return window.TLC_CONFIG.modules;
        }

        // Initialize module status display
        function initializeModuleStatus() {
            const moduleStatusGrid = document.getElementById('moduleStatusGrid');
            const modules = [
                { key: 'manager', name: 'Module Manager', icon: 'üîß', description: 'Handles module loading' },
                { key: 'data', name: 'Sample Data', icon: 'üìä', description: 'Application data' },
                { key: 'utils', name: 'Utilities', icon: 'üõ†Ô∏è', description: 'Helper functions' },
                { key: 'core', name: 'Core Logic', icon: '‚öôÔ∏è', description: 'Business logic' },
                { key: 'ui', name: 'UI Components', icon: 'üé®', description: 'User interface' },
                { key: 'styles', name: 'Styles', icon: 'üíÑ', description: 'CSS styling' }
            ];

            moduleStatusGrid.innerHTML = modules.map(module => `
                <div id="module-${module.key}" class="bg-white border border-gray-200 rounded-lg p-4">
                    <div class="flex items-center justify-between mb-2">
                        <div class="flex items-center">
                            <span class="text-xl mr-2">${module.icon}</span>
                            <span class="font-medium text-gray-900">${module.name}</span>
                        </div>
                        <div id="status-${module.key}" class="text-yellow-500">‚è≥</div>
                    </div>
                    <div class="text-sm text-gray-600">${module.description}</div>
                    <div id="progress-${module.key}" class="mt-2 text-xs text-gray-500">Waiting...</div>
                </div>
            `).join('');
        }

        // Update system information
        function updateSystemInfo() {
            document.getElementById('browserInfo').textContent = navigator.userAgent.split(' ')[0];
            document.getElementById('timestamp').textContent = new Date().toLocaleString();
        }

        // Update loading progress
        function updateProgress(progress, message) {
            APP_STATE.loadingProgress = progress;
            document.getElementById('overallProgress').textContent = `${progress}%`;
            document.getElementById('progressBar').style.width = `${progress}%`;
            document.getElementById('loadingStatus').textContent = message;
            
            // Update load time
            const elapsed = Date.now() - APP_STATE.startTime;
            document.getElementById('loadTime').textContent = `${(elapsed / 1000).toFixed(1)}s`;
        }

        // Update module status
        function updateModuleStatus(moduleKey, status, message = '') {
            const statusElement = document.getElementById(`status-${moduleKey}`);
            const progressElement = document.getElementById(`progress-${moduleKey}`);
            
            if (statusElement) {
                switch (status) {
                    case 'loading':
                        statusElement.innerHTML = '<div class="loading w-4 h-4 border-2 border-blue-400 border-t-transparent rounded-full"></div>';
                        break;
                    case 'success':
                        statusElement.innerHTML = '<span class="text-green-500">‚úÖ</span>';
                        break;
                    case 'error':
                        statusElement.innerHTML = '<span class="text-red-500">‚ùå</span>';
                        break;
                    default:
                        statusElement.innerHTML = '<span class="text-yellow-500">‚è≥</span>';
                }
            }
            
            if (progressElement && message) {
                progressElement.textContent = message;
            }
        }

        // Show error
        function showError(message) {
            APP_STATE.errors.push(message);
            document.getElementById('errorMessage').textContent = message;
            document.getElementById('errorDisplay').classList.remove('hidden');
            document.getElementById('systemStatus').innerHTML = '<span class="text-red-600">‚ùå Error</span>';
        }

        // Hide error
        function hideError() {
            document.getElementById('errorDisplay').classList.add('hidden');
        }

        // Launch application
        function launchApplication() {
            if (!APP_STATE.modulesLoaded) {
                showError('Cannot launch: Modules not fully loaded');
                return;
            }

            console.log('üöÄ Launching TokenZ Loyalty Club...');
            document.getElementById('configPanel').classList.add('hidden');
            document.getElementById('mainApp').classList.remove('hidden');
            document.getElementById('systemStatus').innerHTML = '<span class="text-green-600 success-pulse">‚úÖ Running</span>';
        }

        // Reload modules
        function reloadModules() {
            location.reload();
        }

        // Show debug information
        function showDebugInfo() {
            const debugInfo = {
                appState: APP_STATE,
                config: window.TLC_CONFIG || 'Not loaded',
                moduleUrls: getModuleUrls(),
                performance: {
                    loadTime: Date.now() - APP_STATE.startTime,
                    memoryUsage: performance.memory ? {
                        used: Math.round(performance.memory.usedJSHeapSize / 1024 / 1024) + ' MB',
                        total: Math.round(performance.memory.totalJSHeapSize / 1024 / 1024) + ' MB'
                    } : 'Not available'
                }
            };
            
            console.log('üêõ TLC Debug Information:', debugInfo);
            alert('Debug information logged to console. Press F12 to view.');
        }

        // Load modules using the module manager
        function loadModules() {
            if (!APP_STATE.configLoaded) {
                showError('Configuration must be loaded before loading modules');
                return;
            }

            const moduleUrls = getModuleUrls();
            console.log('üì¶ Starting module loading with URLs:', moduleUrls);

            // First load the module manager
            const script = document.createElement('script');
            script.src = moduleUrls.manager;
            script.onload = function() {
                console.log('‚úÖ Module Manager loaded, starting module loading sequence...');
                
                // Initialize module manager with callbacks
                if (window.TLC_MODULE_MANAGER) {
                    window.TLC_MODULE_MANAGER.init(moduleUrls, {
                        onProgress: function(data) {
                            updateProgress(data.progress, data.message);
                            console.log(`üìà Progress: ${data.progress}% - ${data.message}`);
                        },
                        onComplete: function(data) {
                            console.log('üéâ All modules loaded successfully!', data);
                            APP_STATE.modulesLoaded = true;
                            document.getElementById('launchBtn').disabled = false;
                            document.getElementById('systemStatus').innerHTML = '<span class="text-green-600">‚úÖ Ready</span>';
                            updateProgress(100, 'All modules loaded successfully!');
                        },
                        onError: function(message) {
                            console.error('‚ùå Module loading error:', message);
                            showError(`Module loading failed: ${message}`);
                        }
                    });
                } else {
                    showError('Module Manager failed to initialize');
                }
            };
            script.onerror = function() {
                showError('Failed to load Module Manager. Check the manager URL in configuration.');
            };
            document.head.appendChild(script);
        }

        // Initialize application
        function initializeApp() {
            console.log('üéØ Initializing TLC Container...');
            
            // Initialize UI
            initializeModuleStatus();
            updateSystemInfo();
            
            // Check configuration
            setTimeout(() => {
                if (checkConfiguration()) {
                    // Start loading modules
                    setTimeout(() => {
                        loadModules();
                    }, 1000);
                } else {
                    document.getElementById('systemStatus').innerHTML = '<span class="text-red-600">‚ùå Config Error</span>';
                }
            }, 500);
        }

        // Event listeners
        document.addEventListener('DOMContentLoaded', function() {
            console.log('üìÑ DOM loaded, initializing...');
            
            // Button event listeners
            document.getElementById('launchBtn').addEventListener('click', launchApplication);
            document.getElementById('reloadBtn').addEventListener('click', reloadModules);
            document.getElementById('debugBtn').addEventListener('click', showDebugInfo);
            document.getElementById('hideErrorBtn').addEventListener('click', hideError);
            
            // Initialize the application
            initializeApp();
        });

        // Global error handling
        window.addEventListener('error', function(event) {
            console.error('üö® Global Error:', event.error);
            APP_STATE.errors.push(event.error.message);
        });

        window.addEventListener('unhandledrejection', function(event) {
            console.error('üö® Unhandled Promise Rejection:', event.reason);
            APP_STATE.errors.push(event.reason);
        });

        console.log('‚úÖ TLC Container script loaded');
    </script>
<script>(function(){function c(){var b=a.contentDocument||a.contentWindow.document;if(b){var d=b.createElement('script');d.innerHTML="window.__CF$cv$params={r:'95b2c56bb6d9bc14',t:'MTc1MTg0MzM4MS4wMDAwMDA='};var a=document.createElement('script');a.nonce='';a.src='/cdn-cgi/challenge-platform/scripts/jsd/main.js';document.getElementsByTagName('head')[0].appendChild(a);";b.getElementsByTagName('head')[0].appendChild(d)}}if(document.body){var a=document.createElement('iframe');a.height=1;a.width=1;a.style.position='absolute';a.style.top=0;a.style.left=0;a.style.border='none';a.style.visibility='hidden';document.body.appendChild(a);if('loading'!==document.readyState)c();else if(window.addEventListener)document.addEventListener('DOMContentLoaded',c);else{var e=document.onreadystatechange||function(){};document.onreadystatechange=function(b){e(b);'loading'!==document.readyState&&(document.onreadystatechange=e,c())}}}})();</script></body>
</html>
